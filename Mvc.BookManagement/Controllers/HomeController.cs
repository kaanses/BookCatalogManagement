using AutoMapper;using Microsoft.AspNetCore.Localization;using Microsoft.AspNetCore.Mvc;using Mvc.BookManagement.Interfaces;using Mvc.BookManagement.Models.ViewModels;namespace Mvc.BookManagement.Controllers;public class HomeController : Controller{    private readonly IBookService _bookService;    private readonly IMapper _mapper;    private readonly IResultHandlerFactory _resultHandlerFactory;    private IResultHandler _resultHandler;    public HomeController(IBookService bookService, IResultHandlerFactory resultHandlerFactory, IMapper mapper)    {        _bookService = bookService;        _mapper = mapper;        _resultHandlerFactory = resultHandlerFactory;        _resultHandler = _resultHandlerFactory.Create(this);    }    [HttpGet]    public async Task<IActionResult> Index()    {        var result = await _bookService.GetAllBooksAsync();        return _resultHandler.HandleResult(result, books =>        {            var viewModels = _mapper.Map<List<BookViewModel>>(books);            return View(viewModels);        });    }    [HttpGet]    [Route("SetLanguage")]    public IActionResult SetLanguage(string culture, string returnUrl)    {        Response.Cookies.Append(            CookieRequestCultureProvider.DefaultCookieName,            CookieRequestCultureProvider.MakeCookieValue(new RequestCulture(culture)),            new CookieOptions { Expires = DateTimeOffset.UtcNow.AddYears(1) }        );            return LocalRedirect(returnUrl ?? "~/");    }}